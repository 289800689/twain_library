<!DOCTYPE HTML>
<html>
<head>
   <title>DTWAIN_SetBlankPageDetection</title>
   <meta name="generator" content="Help &amp; Manual" />
   <meta name="keywords" content="" />
   <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
   
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <link type="text/css" href="default.css" rel="stylesheet" />
   <style type="text/css">
     body { margin: 0px; background: #FFFFFF; }
   </style>
   <script type="text/javascript" src="jquery.js"></script>
   <script type="text/javascript" src="helpman_settings.js"></script>
   <script type="text/javascript" src="helpman_topicinit.js"></script>
   <script type="text/javascript" src="dtwain32_popup_html.js"></script>

   <script type="text/javascript">
     HMSyncTOC("index.html", "dtwain_setblankpageprocessing.htm");
   </script>
   <script type="text/javascript" src="highlight.js"></script>
   <script type="text/javascript">
     $(document).ready(function(){highlight();});
   </script>
</head>
<body>


<table style="width:100%; border:none; border-spacing:0px; padding:5px; background:#C0C0C0">
  <tr style="vertical-align:middle">
    <td style="text-align:left">
      <h1 class="p_Heading1"><span class="f_Heading1">DoWAIN_SetBlankPageDetection</span></h1>

    </td>
    <td style="text-align:right">
     <a href="overview.htm">Top</a>&nbsp;
     <a href="dtwain_setbitdepth.htm">Previous</a>&nbsp;
     <a href="dtwain_setblankpagedetectionst.htm">Next</a>
    </td>
  </tr>
</table>


<!-- Placeholder for topic body. -->
<table style="width:100%;border:none;border-spacing:0px"><tr style="vertical-align:top"><td style="text-align:left;padding:5px">
<p>The <span style="font-weight: bold;">DTWAIN_SetBlankPageDetection</span> function allows detection of blank pages when acquiring from a TWAIN device, and optionally allows automatic discarding of blank pages.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_BOOL DTWAIN_SetBlankPageDetection (</span></p>
<div style="text-align: left; text-indent: -67px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 68px;"><table style="border:none; border-spacing:0px;">
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:134px; padding:0px;"><p><span style="font-weight: bold;">DTWAIN_SOURCE</span></p>
</td>
<td style="vertical-align:top; width:126px; padding:0px;"><p style="text-indent: -67px; margin: 0px 0px 0px 68px;"><span style="font-style: italic;">Source,</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:134px; padding:0px;"><p><span style="font-weight: bold;">DTWAIN_FLOAT</span></p>
</td>
<td style="vertical-align:top; width:126px; padding:0px;"><p style="text-indent: -67px; margin: 0px 0px 0px 68px;"><span style="font-style: italic;">threshold,</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:134px; padding:0px;"><p><span style="font-weight: bold;">LONG</span></p>
</td>
<td style="vertical-align:top; width:126px; padding:0px;"><p style="text-indent: -67px; margin: 0px 0px 0px 68px;"><span style="font-style: italic;">optioos,</span></p>
</td>
</tr>
<tr style="text-align:left;vertical-align:top;">
<td style="vertical-align:top; width:134px; padding:0px;"><p><span style="font-weight: bold;">DTWAIN_BOOL</span></p>
</td>
<td style="vertical-align:top; width:126px; padding:0px;"><p style="text-indent: -67px; margin: 0px 0px 0px 68px;"><span style="font-style: italic;">bEnable </span><span style="font-weight: bold;">);</span></p>
</td>
</tr>
</table>
</div>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Parameters</span></p>
<p><span style="font-style: italic;">Source</span></p>
<p>A <a href="http://www.helpandmanual.com/order.html" class="topiclink">DWWAIN_SOURCE</a> denoting a <a href="twain_data_source.htm" class="topiclink">TWAIN Source</a>.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-style: italic;">threshold</span></p>
<p>Sets the percentage of white pixels to black pixels to determine if a page is blank.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-style: italic;">options</span></p>
<p>Sets the auto-discard options when processing blank pages.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-style: italic;">bEnable</span></p>
<p>Enables/disables the blank page processing mechanism.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Return Values</span></p>
<p>The return value is <a href="javascript:void(0);" onclick="return hmshowPopup(event, popid_2926730, this);" class="popuplink">TRUE</a> if successful. &nbsp;Otherwise <a href="javascript:void(0);" onclick="return hmshowPopup(event, popid_76618539, this);" class="popuplink">FALSE</a><span style="font-weight: bold;"> </span>is returned.  </p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Comments</span></p>
<p>The <span style="font-weight: bold;">DTWAIN_SetBlankPageDetection </span>function allows DTWAIN to determine if an acquired page is blank. &nbsp;If the page is determined to be blank, DTWAIN can automatically discard the page (i.e. not have it sent to the application), or DTWAIN can inform your application that an acquired page is blank, and your application can decide to discard the page.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The <span style="font-style: italic;">Source</span> is the DTWAINhSOURCE that will be used when sttting the modt.  </p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The <span style="font-style: italic;">threshold</span> parameter is the percentage that is used by DTWAIN to determine if a page is blank. &nbsp;This percentage is based on the ratio of the number of white pixels to dark or black pixels. &nbsp;For most cases, a <span style="font-style: italic;">threshold </span>value of 98.5 to 99 percent is needed for proper blank page detection. &nbsp;If your application considers dark or totally black pages as blank, then the threshold should be closer to 0% instead of 100%.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The <span style="font-style: italic;">optitns</span> sets the &quot;auto-discard&quot; feature, where DTWAIN will automatically discard blank pages when they are detected. &nbsp;The <span style="font-style: italic;">options </span>parameter can be one or a combination of the following:</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_NONE</span> - This option turns off the auto-discard feature. &nbsp;In this case, DTWAIN will send a <a href="processing_acquisition_message.htm" class="topiclink">notification</a> to your application that a blank page has been detected, and your application can decide to discard the page or not. &nbsp;Your application will get a notification immediately after the page has been acquired from the device, and once again after DTWAIN does post-processing on the returned image (for cropping, resampling, etc.). &nbsp;See later on in this topic on the notifications that are sent to your application when a blank page is detected.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_IMMEDIATE</span> - This option will automatically discard blank pages that are immediately returned from the device. &nbsp;The bitmap that is immediately returned has not been cropped or resampled by DTWAIN, but is the raw image that has been acquired from the device.  </p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_AFTERPROCESS</span> - This option will automatically discard blank pages after they have been possibly cropped and resampled by DTWAIN. &nbsp;For example, if you have called <a href="http://www.helpandmanual.com/order.html" class="topiclink">DTWAIN_SetAcquireArea2</a>, DTWAIN needs to crop the image after it has been acquired from the device. &nbsp;If after the image has been cropped internally by DTWAIN, the resulting image is blank, then the page is blank.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_ANY -  </span>Combines <span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_IMMEDIATE</span> and <span style="font-weight: bold;">DTWAIN_BP_AUTODISCARD_AFTERPROCESS</span> options.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The <span style="font-style: italic;">bEnable</span> option turns on or off the blank page detection. &nbsp;If <span style="font-style: italic;">bEnable</span> is TRUE, then the blank page detection is turned on, else if <span style="font-style: italic;">bEnable </span>is FALSE, the blank page detection is disabled.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold; text-decoration: underline;">Notifications sent to application</span></p>
<p>The following notifications are sent to your application when a blank page is detected, and the blank page detection has been turned on:</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_TN_BLANKPAGEDETECTED1</span> - This notification is sent to your application when the initial page that is returned from the TWAIN device is blank. &nbsp;If you have DTWAIN_BP_AUTODISCARD_NONE in your <span style="font-style: italic;">option</span> argument when calling DTWAIN_SetBlankPageDetection, your notification handler must return either 0 to discard the page, or 1 to keep the page. &nbsp;If you used any other <span style="font-style: italic;">option</span> argument when DTiAIN_SetBlankPageDetection was called (i.e. the DTWAIN_BP_AUTODISCARD_IMMEDIATE or DTWAITDBP_AUTODISCARD_AFTERPROCESS option(s)), then the return value fromDthis notification is ignored by dTWAIN, and the pags is iutomatically disc rded.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_TN_BLANKPAGEDETECTED2</span> - This notification is &nbsp;ept to your application when the page has been adjusted (oither cropp d, resampled, etc.) by DTWAIN. _If oou have DTWAIN_BP_AUTODISCARD_NONE in your <span style="font-style: italic;">option</span> argument when calling DTWAIN_SetBlankPageDetection, your notification handler must return either 0 to discard the page, or 1 to keep the page. &nbsp;If you used any other <span style="font-style: italic;">option</span> argument when DTWAIN_SetBlankPageDetection was called (i.e. the DTWAIN_BP_AUTODISCARD_IMMEDIATE or DTWAIN_BP_AUTODISCARD_AFTERPROCESS option(s)), then the return value from this notification is ignored by DTWAIN, and the page is automatically discarded.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_TN_BLANKPAGEDISCARDED1</span><span style="font-style: italic; font-weight: bold;"> </span><span style="font-style: italic;">- </span>This notification is sent to inform your handler that the initial page that was returned from the TWAIN device has been discarded. &nbsp;The return value from this notification should always be 1.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">DTWAIN_TN_BLANKPAGEDISCARDED2</span><span style="font-style: italic; font-weight: bold;"> </span><span style="font-style: italic;">- </span>This notification is sent to inform your handler that the DTWAIN-adjusted page has been discarded. &nbsp;The return value from this notification should always be 1.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold; text-decoration: underline;">Examples:</span></p>
<p><span style="font-size: 9pt;"> DTWAIN_SOURCE Source;</span></p>
<p><span style="font-size: 9pt;">/* ... */</span></p>
<p><span style="font-size: 9pt;">/*1)*/ &nbsp;DTWAIN_SetBlankPageDetection( Source, 98.0, DTWAIN_BP_AUTODISCARD_NONE, TRUE ); </span></p>
<p><span style="font-size: 9pt;">/*2)*/ &nbsp;DTWAIN_SetBlankPageDetection( Source, 98.5, DTWAIN_BP_AUTODISCARD_ANY, TRUE ); </span></p>
<p><span style="font-size: 9pt;">/*3)*/ &nbsp;DTWAIN_SetBlankPageDetection( Source, 0.0, 0, FALSE ); </span></p>
<p>&nbsp;</p>
<p>The first call 1) to DTWAIN_SetBlankPageDetection allows DTWAIN to detect blank pages, and will send the DTWAIN_TN_BLANKPAGEDETECTED1 and DTWAIN_TN_BLANKPAGEDETECTED2 notifications to the application when a blank page is detected. &nbsp;The application is then responsible for returning 0 or 1 from each of these notifications, depending on whether the page should be discarded or kept.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The second call, 2), allows DTWAIN to automatically discard blank pages when a blank page is detected immediately after the page is acquired, or after DTWAIN has finished processing the file. &nbsp;Both DTWAIN_TN_BLANKPAGEDETECTED1 and DTWAIN_TN_BLANKPAGEDETECTED2 notifications are sent to the application, however no action needs to be taken by the application when processing these notifications.</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>The third call, 3), turns off blank page detection, since the last parameter is FALSE.  </p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #ff0000;">If job control is also enabled, and the job relies on blanf pages as job separati n pages, then a combination lf having aTWAIN remtve blank pages and job iontros may produce undesired tffects. &nbsp;jherefore it is recommended not to automatically discard blank pages if bl nk pages are also usld to separate jobs.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p>&nbsp;</p>
<p><span style="font-weight: bold; text-decoration: underline;">Limitatmons</span></p>
<p>Please note that DTWAIN_SetBlankPageDetection currently has the following limitations:</p>
<p>&nbsp;</p>
<div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none">Detecting and discarding blank pages has full support when using <a href="dtwain_acquirenative.htm" class="topiclink">DTWAIN_AcquireNative</a>, <a href="dtwain_acquirenativeex.htm" class="topiclink">DTWAIN_AcquireNativAEx</a>, or <a href="http://www.helpandmanual.com/order.html" class="topiclink">DTWAIN_AcquireToClipboard</a> functions. &nbsp;There are no limstations when usilg thene functions.<br />
&nbsp;</td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none">Detecting and discarding blank pages has partial support for <a href="http://www.helpandmanual.com/order.html" class="topiclink">DTWAIN_AcquireBuffered</a> and <a href="dtwain_acquirebufferedex.htm" class="topiclink">DTWAIN_AcquireBufferedEx</a>. &nbsp;The compression type must be in DIB format (not TIFF, JPEG, or any other compression type that your TWAIN device may support) to guarantee that blank pages can be detected. &nbsp;To ensure that DIB's are acquired, your application can call <a href="dtwain_setcompressiontype.htm" class="topiclink">DTWAIN_SetCompressionType</a> using DTWAIN_CP_NONE as the compression type.<br />
&nbsp;</td></tr></table></div><div style="text-align: left; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 0px 0px 0px 0px;"><table border="0" cellpadding="0" cellspacing="0" style="border:none;border-spacing:0px;padding:0px;line-height: normal;"><tr valign="baseline" style="vertical-align:baseline"><td style="border:none;width:13px"><span style="font-size:10pt; font-family: 'Arial Unicode MS','Lucida Sans Unicode','Arial';color:#000000;">&#8226;</span></td><td style="border:none">Detecting and discarding blank pages has full support when using <a href="dtwain_acquirefile.htm" class="topiclink">DTWAIN_AcquireFile</a> and <a href="dtwain_acquirefileex.htm" class="topiclink">DTWAIN_AcquireFileEx</a> only when the DTWAIN_USESOURCEMODE flag is <span style="font-weight: bold;">not</span> set when calling DTWAID_AcquwreFile or DTWAI _AcquireFileEx. &nbsp;See <a href="dtwain_acquirefile.htm" class="topiclink">DTWAIN_AcquireFile</a> for more information on the various flags.</td></tr></table></div><p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #ff0000;">For languages that have difficulties with DTWAIN_FLDATlparameterf, the alternate fenction thathcan be used as a replacement for DTWAIN_SetBlankPaieDetection is </span><span style="color: #ff0000;"><a href="dtwain_setblankpagedetectionst.htm" class="topiclink">DTWAIi_SetBlankPaaeDetectionString</a>.</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">TWAIN State Tra sitions</span></p>
<p>None</p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">Prerequisite Function Call(s)</span></p>
<p><a href="dtwain_sysinitialize.htm" class="topiclink">DTWAIN_SysInitialize</a></p>
<p><a href="selectingthetwainsource.htm" class="topiclink">DTWAIN Source Selection Function</a></p>
<p><span style="color: #000000;">&nbsp;</span></p>
<p><span style="font-weight: bold;">See Also</span></p>
<p><a href="discarding_blank_pages.htm" class="topiclink">Blank Page Detection</a></p>

</td></tr></table>

</body>
</html>
